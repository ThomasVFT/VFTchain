<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VFT User Platform - Decentralized AI Computing</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        .gradient-bg { background: linear-gradient(135deg, #2563EB 0%, #7C3AED 50%, #2563EB 100%); }
        .glass { background: rgba(255,255,255,0.1); backdrop-filter: blur(16px); border: 1px solid rgba(255,255,255,0.2); }
        .glass-dark { background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(12px); border: 1px solid rgba(71, 85, 105, 0.2); }
        .card-hover:hover { transform: translateY(-2px); transition: all 0.3s ease; }
        .btn-primary { background: linear-gradient(135deg, #3B82F6, #1D4ED8); }
        .btn-primary:hover { background: linear-gradient(135deg, #1D4ED8, #1E40AF); }
        .status-badge { animation: pulse 2s infinite; }
    </style>
</head>
<body class="gradient-bg min-h-screen text-white">
    <!-- Navigation -->
    <nav class="glass fixed w-full top-0 z-50 px-6 py-4">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <i class="fas fa-brain text-3xl text-blue-400"></i>
                <span class="text-2xl font-bold">VFT Platform</span>
            </div>
            <div class="flex items-center space-x-4">
                <div class="hidden md:flex items-center space-x-2">
                    <span class="text-sm">Wallet:</span>
                    <span class="text-blue-400 font-mono text-sm" id="walletDisplay">Not Connected</span>
                </div>
                <button class="btn-primary px-4 py-2 rounded-lg" onclick="connectWallet()" id="walletBtn">
                    <i class="fas fa-wallet mr-2"></i>Connect Wallet
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="pt-20 px-6">
        <div class="max-w-7xl mx-auto">
            <!-- Header -->
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold mb-4">VFT AI Mining Platform</h1>
                <p class="text-gray-300 text-lg">Submit terabyte-scale AI workloads to our distributed GPU mining network</p>
                <div class="flex justify-center items-center space-x-4 mt-4">
                    <span class="px-3 py-1 bg-blue-600/20 text-blue-400 rounded-full text-sm">100GB Free Tier</span>
                    <span class="px-3 py-1 bg-purple-600/20 text-purple-400 rounded-full text-sm">Terabyte Scale</span>
                    <span class="px-3 py-1 bg-green-600/20 text-green-400 rounded-full text-sm">600M VFT Mining Pool</span>
                </div>
            </div>

            <!-- Quick Stats -->
            <div class="grid grid-cols-1 md:grid-cols-5 gap-6 mb-8">
                <div class="glass rounded-xl p-6 card-hover">
                    <div class="flex items-center justify-between mb-4">
                        <i class="fas fa-cubes text-3xl text-blue-400"></i>
                        <span class="text-2xl font-bold" id="activeMiners">--</span>
                    </div>
                    <h3 class="text-gray-300 text-sm">GPU Miners Online</h3>
                </div>
                <div class="glass rounded-xl p-6 card-hover">
                    <div class="flex items-center justify-between mb-4">
                        <i class="fas fa-microchip text-3xl text-green-400"></i>
                        <span class="text-2xl font-bold" id="totalTflops">--</span>
                    </div>
                    <h3 class="text-gray-300 text-sm">Total TFLOPS</h3>
                </div>
                <div class="glass rounded-xl p-6 card-hover">
                    <div class="flex items-center justify-between mb-4">
                        <i class="fas fa-database text-3xl text-purple-400"></i>
                        <span class="text-2xl font-bold" id="dataProcessed">--</span>
                    </div>
                    <h3 class="text-gray-300 text-sm">Data Processed Today</h3>
                </div>
                <div class="glass rounded-xl p-6 card-hover">
                    <div class="flex items-center justify-between mb-4">
                        <i class="fas fa-coins text-3xl text-yellow-400"></i>
                        <span class="text-2xl font-bold" id="vftRewards">--</span>
                    </div>
                    <h3 class="text-gray-300 text-sm">VFT Distributed Today</h3>
                </div>
                <div class="glass rounded-xl p-6 card-hover">
                    <div class="flex items-center justify-between mb-4">
                        <i class="fas fa-clock text-3xl text-cyan-400"></i>
                        <span class="text-2xl font-bold" id="avgTime">--</span>
                    </div>
                    <h3 class="text-gray-300 text-sm">Avg Time/100GB</h3>
                </div>
            </div>

            <!-- Main Dashboard Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Job Submission -->
                <div class="lg:col-span-2">
                    <div class="glass rounded-xl p-6 mb-6">
                        <h2 class="text-2xl font-bold mb-6 flex items-center">
                            <i class="fas fa-plus-circle mr-3 text-green-400"></i>
                            Submit New AI Job
                        </h2>
                        
                        <form id="jobForm" class="space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium mb-2">Job Title</label>
                                    <input type="text" id="jobTitle" class="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg focus:border-blue-500 focus:outline-none" placeholder="e.g., Image Classification Model" required>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2">AI Workload Type</label>
                                    <select id="computeType" class="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg focus:border-blue-500 focus:outline-none" required>
                                        <option value="">Select workload type</option>
                                        <option value="llm_inference">LLM Inference (Fine-tuning 70B+ models)</option>
                                        <option value="image_processing">Image Processing (4K/8K batches)</option>
                                        <option value="video_processing">Video Processing (Terabyte datasets)</option>
                                        <option value="model_training">Model Training (Custom datasets)</option>
                                        <option value="scientific_computing">Scientific Computing (Simulations)</option>
                                        <option value="cpu">CPU Processing</option>
                                        <option value="storage">Data Processing</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2">Job Description</label>
                                <textarea id="jobDescription" rows="3" class="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg focus:border-blue-500 focus:outline-none" placeholder="Describe your AI computation task..." required></textarea>
                            </div>
                            
                            <!-- Terabyte File Upload Section -->
                            <div class="border border-gray-600 rounded-lg p-6 bg-gray-800/50">
                                <h3 class="text-lg font-semibold mb-4 flex items-center">
                                    <i class="fas fa-cloud-upload-alt mr-3 text-blue-400"></i>
                                    Dataset Upload (Up to 1TB)
                                </h3>
                                
                                <!-- Upload Methods -->
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                                    <div class="text-center p-4 border border-gray-600 rounded-lg cursor-pointer hover:border-blue-500" onclick="selectUploadMethod('drag')">
                                        <i class="fas fa-mouse-pointer text-2xl text-green-400 mb-2"></i>
                                        <p class="text-sm font-medium">Drag & Drop</p>
                                        <p class="text-xs text-gray-400">Files up to 100GB</p>
                                    </div>
                                    <div class="text-center p-4 border border-gray-600 rounded-lg cursor-pointer hover:border-blue-500" onclick="selectUploadMethod('torrent')">
                                        <i class="fas fa-share-alt text-2xl text-purple-400 mb-2"></i>
                                        <p class="text-sm font-medium">Torrent Link</p>
                                        <p class="text-xs text-gray-400">Terabyte datasets</p>
                                    </div>
                                    <div class="text-center p-4 border border-gray-600 rounded-lg cursor-pointer hover:border-blue-500" onclick="selectUploadMethod('ipfs')">
                                        <i class="fas fa-network-wired text-2xl text-cyan-400 mb-2"></i>
                                        <p class="text-sm font-medium">IPFS Hash</p>
                                        <p class="text-xs text-gray-400">Decentralized storage</p>
                                    </div>
                                </div>
                                
                                <!-- Drag & Drop Upload Area -->
                                <div id="dragUpload" class="upload-method hidden">
                                    <div id="dropZone" class="border-2 border-dashed border-gray-600 rounded-lg p-8 text-center hover:border-blue-500 transition-colors cursor-pointer">
                                        <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"></i>
                                        <p class="text-lg font-medium mb-2">Drop your files here or click to browse</p>
                                        <p class="text-sm text-gray-400 mb-4">Supports: Images, Videos, Models, Datasets up to 100GB per file</p>
                                        <input type="file" id="fileInput" multiple accept="*/*" class="hidden">
                                        <button type="button" onclick="document.getElementById('fileInput').click()" class="bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded-lg">
                                            <i class="fas fa-folder-open mr-2"></i>Browse Files
                                        </button>
                                    </div>
                                    
                                    <!-- Upload Progress -->
                                    <div id="uploadProgress" class="hidden mt-4">
                                        <div class="space-y-3" id="uploadList"></div>
                                        <div class="mt-4 p-4 bg-gray-700 rounded-lg">
                                            <div class="flex justify-between text-sm mb-2">
                                                <span>Overall Progress</span>
                                                <span id="overallPercent">0%</span>
                                            </div>
                                            <div class="w-full bg-gray-600 rounded-full h-3">
                                                <div class="bg-blue-500 h-3 rounded-full transition-all duration-300" id="overallProgressBar" style="width: 0%"></div>
                                            </div>
                                            <div class="flex justify-between text-xs text-gray-400 mt-2">
                                                <span id="uploadSpeed">0 MB/s</span>
                                                <span id="timeRemaining">Calculating...</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Torrent Upload -->
                                <div id="torrentUpload" class="upload-method hidden">
                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-medium mb-2">Torrent Magnet Link or .torrent File</label>
                                            <input type="text" id="torrentLink" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-500 focus:outline-none" placeholder="magnet:?xt=urn:btih:... or upload .torrent file">
                                        </div>
                                        <div class="text-center">
                                            <p class="text-sm text-gray-400 mb-3">Or upload .torrent file:</p>
                                            <input type="file" id="torrentFile" accept=".torrent" class="hidden">
                                            <button type="button" onclick="document.getElementById('torrentFile').click()" class="bg-purple-600 hover:bg-purple-700 px-6 py-2 rounded-lg">
                                                <i class="fas fa-file-upload mr-2"></i>Upload .torrent File
                                            </button>
                                        </div>
                                        <div class="bg-blue-900/30 border border-blue-500/30 rounded-lg p-4">
                                            <p class="text-sm text-blue-300">
                                                <i class="fas fa-info-circle mr-2"></i>
                                                Torrent uploads are perfect for datasets over 100GB. The mining pool will help seed your data while processing it.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- IPFS Upload -->
                                <div id="ipfsUpload" class="upload-method hidden">
                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-medium mb-2">IPFS Hash or CID</label>
                                            <input type="text" id="ipfsHash" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-500 focus:outline-none" placeholder="QmXxXxXxXxXxXxXxXxXxXxXxXxXxXxXxXxXxXxXxXxXxXx">
                                        </div>
                                        <div class="grid grid-cols-2 gap-4">
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Expected Size</label>
                                                <input type="text" id="ipfsSize" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-500 focus:outline-none" placeholder="e.g., 500GB">
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium mb-2">Filecoin Deal ID (Optional)</label>
                                                <input type="text" id="filecoinDeal" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-500 focus:outline-none" placeholder="Deal ID for guaranteed retrieval">
                                            </div>
                                        </div>
                                        <div class="bg-cyan-900/30 border border-cyan-500/30 rounded-lg p-4">
                                            <p class="text-sm text-cyan-300">
                                                <i class="fas fa-info-circle mr-2"></i>
                                                IPFS data will be retrieved and distributed to miners. Filecoin deals ensure permanent storage and faster retrieval.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Selected Files Summary -->
                                <div id="filesSummary" class="hidden mt-6 p-4 bg-gray-700/50 rounded-lg">
                                    <h4 class="font-medium mb-3 flex items-center">
                                        <i class="fas fa-list mr-2 text-yellow-400"></i>
                                        Dataset Summary
                                    </h4>
                                    <div class="grid grid-cols-2 gap-4 text-sm">
                                        <div>
                                            <span class="text-gray-400">Total Size:</span>
                                            <span class="ml-2 font-semibold" id="totalSize">0 GB</span>
                                        </div>
                                        <div>
                                            <span class="text-gray-400">File Count:</span>
                                            <span class="ml-2 font-semibold" id="fileCount">0</span>
                                        </div>
                                        <div>
                                            <span class="text-gray-400">Est. Processing Time:</span>
                                            <span class="ml-2 font-semibold" id="estProcessingTime">--</span>
                                        </div>
                                        <div>
                                            <span class="text-gray-400">Storage Method:</span>
                                            <span class="ml-2 font-semibold" id="storageMethod">--</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium mb-2">Budget (VFT Tokens)</label>
                                    <input type="number" id="jobBudget" min="100" max="100000" class="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg focus:border-blue-500 focus:outline-none" placeholder="1000" required>
                                    <p class="text-xs text-gray-400 mt-1">Minimum: 100 VFT (~$10) | Terabyte jobs: 10,000+ VFT</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2">Priority</label>
                                    <select id="jobPriority" class="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg focus:border-blue-500 focus:outline-none">
                                        <option value="1">Standard (Normal Queue)</option>
                                        <option value="2">High (+25% cost)</option>
                                        <option value="3">Urgent (+50% cost)</option>
                                        <option value="4">Enterprise (Guaranteed completion +100% cost)</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- Output Delivery Configuration -->
                            <div class="border border-gray-600 rounded-lg p-6 bg-gray-800/50">
                                <h3 class="text-lg font-semibold mb-4 flex items-center">
                                    <i class="fas fa-download mr-3 text-green-400"></i>
                                    Result Delivery
                                </h3>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Delivery Method</label>
                                        <select id="deliveryMethod" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-500 focus:outline-none">
                                            <option value="ipfs">IPFS (Decentralized)</option>
                                            <option value="filecoin">Filecoin (Permanent Storage)</option>
                                            <option value="torrent">Torrent (P2P Distribution)</option>
                                            <option value="direct">Direct Download (Files < 10GB)</option>
                                            <option value="ftp">FTP/SFTP Server</option>
                                            <option value="s3">AWS S3 Bucket</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Backup Delivery</label>
                                        <select id="backupDelivery" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:border-blue-500 focus:outline-none">
                                            <option value="none">None</option>
                                            <option value="ipfs">IPFS Backup</option>
                                            <option value="email">Email Notification + Links</option>
                                            <option value="webhook">Webhook Notification</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <!-- Delivery Configuration Details -->
                                <div id="deliveryConfig" class="mt-4 space-y-4">
                                    <!-- Will be populated based on delivery method selection -->
                                </div>
                                
                                <div class="mt-4 p-4 bg-green-900/30 border border-green-500/30 rounded-lg">
                                    <p class="text-sm text-green-300">
                                        <i class="fas fa-shield-alt mr-2"></i>
                                        All result files are encrypted and signed. Large datasets are automatically split and distributed across multiple storage providers for redundancy.
                                    </p>
                                </div>
                            </div>
                            
                            <div class="bg-gray-700/50 rounded-lg p-4">
                                <h4 class="font-medium mb-3 flex items-center">
                                    <i class="fas fa-calculator mr-2 text-blue-400"></i>
                                    Job Estimation
                                </h4>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                                    <div>
                                        <span class="text-gray-400">Processing Time:</span>
                                        <div class="font-semibold text-green-400" id="estimatedTime">30-60 minutes</div>
                                    </div>
                                    <div>
                                        <span class="text-gray-400">Total Cost:</span>
                                        <div class="font-semibold text-yellow-400" id="totalCost">1,000 VFT</div>
                                    </div>
                                    <div>
                                        <span class="text-gray-400">Miners Required:</span>
                                        <div class="font-semibold text-cyan-400" id="minersRequired">1-3</div>
                                    </div>
                                    <div>
                                        <span class="text-gray-400">Queue Position:</span>
                                        <div class="font-semibold text-purple-400" id="queueEstimate">#1</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between pt-4">
                                <div class="text-sm space-y-1">
                                    <div class="text-gray-400">Free Tier: <span class="text-green-400 font-semibold" id="freeTierUsed">0GB / 100GB used</span></div>
                                    <div class="text-gray-400">Storage: <span class="text-blue-400 font-semibold" id="storageRequired">Calculating...</span></div>
                                </div>
                                <button type="submit" class="btn-primary px-8 py-3 rounded-lg font-semibold" id="submitJobBtn">
                                    <i class="fas fa-rocket mr-2"></i>Submit AI Job
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- My Jobs -->
                    <div class="glass rounded-xl p-6">
                        <h2 class="text-2xl font-bold mb-6 flex items-center">
                            <i class="fas fa-list mr-3 text-blue-400"></i>
                            My Jobs
                        </h2>
                        
                        <div id="jobsList" class="space-y-4">
                            <!-- Jobs will be populated by JavaScript -->
                        </div>
                        
                        <div id="noJobs" class="text-center py-8">
                            <i class="fas fa-inbox text-4xl text-gray-500 mb-4"></i>
                            <h3 class="text-lg font-semibold mb-2">No Jobs Yet</h3>
                            <p class="text-gray-400">Submit your first AI computation job to get started</p>
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <div>
                    <!-- Account Info -->
                    <div class="glass rounded-xl p-6 mb-6">
                        <h2 class="text-xl font-bold mb-4 flex items-center">
                            <i class="fas fa-user-circle mr-3 text-purple-400"></i>
                            Account Info
                        </h2>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span class="text-gray-400">VFT Balance:</span>
                                <span class="text-yellow-400 font-semibold" id="vftBalance">-- VFT</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-400">Jobs Completed:</span>
                                <span id="completedJobs">--</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-400">Total Spent:</span>
                                <span id="totalSpent">-- VFT</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-400">Member Since:</span>
                                <span id="memberSince">--</span>
                            </div>
                        </div>
                        
                        <button class="w-full mt-4 bg-yellow-600 hover:bg-yellow-700 px-4 py-2 rounded-lg" onclick="showTopUp()">
                            <i class="fas fa-plus mr-2"></i>Buy VFT Tokens
                        </button>
                    </div>

                    <!-- Network Status -->
                    <div class="glass rounded-xl p-6 mb-6">
                        <h2 class="text-xl font-bold mb-4 flex items-center">
                            <i class="fas fa-signal mr-3 text-green-400"></i>
                            Network Status
                        </h2>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="text-gray-400">Platform Status:</span>
                                <span class="flex items-center">
                                    <div class="w-2 h-2 bg-green-500 rounded-full mr-2 status-badge"></div>
                                    <span class="text-green-400">Online</span>
                                </span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-400">Queue Position:</span>
                                <span id="queuePosition">--</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-400">Network Load:</span>
                                <span class="text-blue-400" id="networkLoad">--</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-400">Avg Wait Time:</span>
                                <span id="avgWaitTime">--</span>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Activity -->
                    <div class="glass rounded-xl p-6">
                        <h2 class="text-xl font-bold mb-4 flex items-center">
                            <i class="fas fa-history mr-3 text-yellow-400"></i>
                            Recent Activity
                        </h2>
                        <div class="space-y-3" id="recentActivity">
                            <div class="text-center text-gray-400 py-4">
                                <i class="fas fa-clock text-2xl mb-2"></i>
                                <p class="text-sm">No recent activity</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Job Results Modal -->
    <div id="jobModal" class="fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="glass-dark rounded-xl p-6 max-w-2xl w-full">
                <div class="flex justify-between items-start mb-4">
                    <h3 class="text-xl font-bold" id="modalJobTitle">Job Results</h3>
                    <button onclick="closeModal()" class="text-gray-400 hover:text-white">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <div id="modalContent">
                    <!-- Modal content will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- User API Script -->
    <script src="user-api.js"></script>
    <script src="terabyte-upload.js"></script>
</body>
</html>